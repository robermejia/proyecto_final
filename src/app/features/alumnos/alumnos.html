<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Lista de alumnos</h2>
        <button class="btn btn-primary" (click)="refreshAlumnos()" [disabled]="isLoading">
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status"></span>
            {{ isLoading ? 'Cargando...' : 'Refrescar' }}
        </button>
    </div>
    
    <!-- Mostrar errores -->
    <div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
        <strong>Error:</strong> No se pudieron cargar los alumnos. {{ error }}
        <button type="button" class="btn-close" (click)="clearError()" aria-label="Close"></button>
    </div>
    
    <div *ngIf="!isLoading && alumnos.length > 0 && !error; else loadingOrEmpty">
        <app-students-table (deleteEvent)="deleteStudent($event)" [students]="alumnos" [isAdmin]="isAdmin"></app-students-table>
    </div>
    
    <ng-template #loadingOrEmpty>
        <div *ngIf="isLoading; else emptyState" class="text-center">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Cargando...</span>
            </div>
            <p class="mt-2">Cargando alumnos...</p>
            <small class="text-muted">Cargando en 2 segundos...</small>
        </div>
        <ng-template #emptyState>
            <div class="text-center">
                <p>No hay alumnos registrados.</p>
                <button class="btn btn-primary" (click)="refreshAlumnos()">Refrescar</button>
            </div>
        </ng-template>
    </ng-template>
</div>